!function(){"use strict";function e(e){e.classList.remove("c-modal-transition--scale-down"),E.classList.remove("c-modal-overlay--show"),E.style.visibility="hidden"}function t(e){e.classList.add("c-modal-transition--scale-down"),E.classList.add("c-modal-overlay--show"),E.style.visibility="visible"}function n(){const e=function(e){for(let t=e.length-1;t>0;t--){let n=Math.floor(Math.random()*(t+1)),c=e[t];e[t]=e[n],e[n]=c}return e}(_);let t=document.createDocumentFragment(),n=document.createElement("img");e.forEach(function(e){let i=n.cloneNode();i.setAttribute("src",`assets/images/${e}.png`),i.setAttribute("id",e),i.classList.add("c-pieces__piece-img"),i.setAttribute("draggable","true"),i.addEventListener("dragstart",c),t.appendChild(i)}),M.appendChild(t)}function c(e){if(e.target.classList.contains("c-pieces__piece-img")){const t=e.target.parentNode;e.dataTransfer.setData("text/plain",e.target.id),t.classList.contains("c-pieces__piece")&&(A=t.id.substr(-3))}}function i(e,n,c){const i=e.id.substr(-3);i===n?$++:(c!==i&&n!==A||$--,n===A&&c===i&&$--),41===$&&(t(z),C.pause(),function(){let e=document.querySelectorAll(".c-pieces__piece-img");for(let t of e)t.classList.add("congrats-flip")}())}function s(t){e(t),window.location.reload(!0),A="",$=0}let a=document.querySelector(".c-switch"),o=document.querySelector("#game-level-cb"),r=document.querySelector(".c-splash__msg"),l=document.querySelector(".c-splash"),d=document.querySelector(".c-btn--start"),u=document.querySelector(".l-puzzle"),m=document.querySelector(".img--solved"),p=document.querySelector(".c-btn--pause"),y=document.querySelector(".c-btn--hint"),h=document.querySelector(".c-btn--hint .hint-times"),g=3,f=document.querySelector(".c-countdown"),v=6e5,L=3e5,b=v,q=document.querySelector(".c-btn--continue"),S=document.querySelector(".c-modal--pause .c-btn--restart"),w=document.querySelector(".c-modal--pause"),E=document.querySelector(".c-modal-overlay"),T=document.querySelector(".c-modal--gameover .c-btn--restart"),D=document.querySelector(".c-modal--gameover"),_=["0-0","0-1","0-2","0-3","0-4","1-0","1-1","1-2","1-3","2-0","2-1","2-2","2-3","2-4","3-0","3-1","3-2","3-3","4-0","4-1","4-2","4-3","4-4","5-0","5-1","5-2","5-3","6-0","6-1","6-2","6-3","6-4","7-0","7-1","7-2","7-3","8-0","8-1","8-2","8-3","8-4"],M=document.querySelector(".l-pieces-storage"),k=document.querySelector(".c-pieces--drop-zone"),H=document.querySelector(".c-modal--congrats .c-btn--restart"),z=document.querySelector(".c-modal--congrats"),$=0,A="",C={start(e){let n=this,c=Date.parse(e)-Date.parse(new Date),i=Math.floor(c/1e3%60),s=Math.floor(c/1e3/60%60);if(f.innerHTML=`${`0${s}`.slice(-2)}:${`0${i}`.slice(-2)}`,c<=6e4&&(f.style.color="red"),c<=0)return clearTimeout(this.timeout),delete this.timeout,41!==$&&(new Audio("assets/sound/gameover.wav").play(),t(D)),!1;this.timeout=window.setTimeout(()=>{n.gameTimeLeft=c,n.start(e)},1e3)},pause(){clearTimeout(this.timeout),delete this.timeout},resume(){if(!this.timeout){let e=new Date(this.gameTimeLeft+Date.parse(new Date)-1e3);this.start(e)}}};a.addEventListener("click",function(){o.checked?(r.innerHTML="<span>hard mode</span>You will have 5 minutes & NO hint to solve the puzzle. Good Luck!",b=L,f.innerHTML="05:00",h.innerHTML="",y.disabled=!0):(r.innerHTML="<span>easy mode</span>You will have 10 minutes & 3 hints to solve the puzzle.",b=v,f.innerHTML="10:00",h.innerHTML="(3)",y.disabled=!1)}),d.addEventListener("click",()=>{const e=new Date(Date.parse(new Date)+b);l.classList.add("c-splash--hidden"),u.style.display="flex",M.style.display="flex",n(),C.start(e)}),y.addEventListener("mousedown",function(){m.style.visibility="visible",h.innerHTML=`(${--g})`}),y.addEventListener("mouseup",function(){m.style.visibility="hidden",0===g&&(y.disabled=!0)}),p.addEventListener("click",()=>{C.pause(),t(w)}),q.addEventListener("click",()=>{e(w),C.resume()}),S.addEventListener("click",()=>s(w)),T.addEventListener("click",()=>s(D)),H.addEventListener("click",()=>s(z)),k.addEventListener("dragover",function(e){e.preventDefault()}),k.addEventListener("drop",function(e){e.preventDefault(),e.stopPropagation();const t=e.dataTransfer.getData("text");e.target.classList.contains("c-pieces__piece")?(e.target.appendChild(document.getElementById(t)),i(e.target,t)):e.target.classList.contains("c-pieces__piece-img")&&t!==e.target.id&&function(e,t){const n=document.getElementById(e);let c=t.parentNode;c.replaceChild(n,t),M.appendChild(t),i(c,e,t.id)}(t,e.target),A="",e.dataTransfer.clearData()})}();